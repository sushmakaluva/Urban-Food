{"ast":null,"code":"var _jsxFileName = \"/Users/sushma/code/Urban-Food/client/src/components/SearchBar.js\";\nimport React, { useState, useContext } from 'react';\nimport { Row, Col } from 'react-bootstrap';\nimport axios from \"axios\";\nimport { InputAdornment, TextField, IconButton } from \"@material-ui/core\";\nimport SearchIcon from '@material-ui/icons/Search';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport RoomIcon from '@material-ui/icons/Room';\nimport { CityContext } from \"../utils/CityContext\";\nimport { Typeahead } from 'react-bootstrap-typeahead'; // import Select from 'react-select';\n\nimport './locationCSS.css';\nexport default function SearchBar(props) {\n  const [selectedCity, setSelectedCity] = useState([]);\n  const {\n    cityDetails,\n    setCityDetails\n  } = useContext(CityContext);\n  const [location, setLocation] = useState('');\n  const [searchKeyword, setSearchKeyword] = useState();\n  const [locationSuggestions, setLocationSuggestions] = useState([{}]);\n  const searchLocationStyle = {\n    backgroundColor: \"white\",\n    width: \"0%\",\n    marginBottom: \"20px\",\n    border: \"none\"\n  };\n  const searchBarStyle = {\n    backgroundColor: \"white\",\n    width: \"40%\",\n    marginBottom: \"30px\",\n    border: \"none\"\n  };\n\n  const locationOnChange = (location, e) => {\n    setLocation(location);\n    getLocationSuggestions(location);\n    getCityId(selectedCity);\n  };\n\n  const SearchOnChange = e => {\n    setSearchKeyword(e.target.value);\n  };\n\n  const getCityId = location => {\n    axios.get('https://developers.zomato.com/api/v2.1/locations?query=' + location, {\n      headers: {\n        \"user-key\": \"7643451d5684bd9eb0116cdfd72673a9\"\n      }\n    }).then(res => {\n      console.log(\"getCityId response\", res.data);\n\n      if (res.data.location_suggestions.length > 0) {\n        setCityDetails({\n          city_id: res.data.location_suggestions[0].city_id,\n          city_name: res.data.location_suggestions[0].city_name,\n          lat: res.data.location_suggestions[0].latitude,\n          long: res.data.location_suggestions[0].longitude\n        });\n      }\n    }).catch(err => console.log(err));\n  };\n\n  const getLocationSuggestions = locationKeyword => {\n    if (!locationKeyword) return 'Toronto';\n    axios.get('https://developers.zomato.com/api/v2.1/locations?count=10&query=' + locationKeyword, {\n      headers: {\n        \"user-key\": \"7643451d5684bd9eb0116cdfd72673a9\"\n      }\n    }).then(res => {\n      console.log(\"Location suggestions response\", res.data);\n      setLocationSuggestions(res.data.location_suggestions);\n    }).catch(err => console.log(err));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Typeahead, {\n    id: \"locationBox\",\n    clearButton: true,\n    onChange: setSelectedCity,\n    onInputChange: locationOnChange,\n    labelKey: option => `${option.city_name}`,\n    options: locationSuggestions,\n    placeholder: \"Select city...\",\n    selected: selectedCity,\n    style: searchLocationStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    id: \"standard-full-width\",\n    placeholder: \"Search for a restaurant, cuisine or a dish\",\n    value: searchKeyword,\n    onChange: SearchOnChange,\n    autoComplete: \"on\",\n    variant: \"outlined\",\n    style: searchBarStyle,\n    InputProps: {\n      endAdornment: /*#__PURE__*/React.createElement(InputAdornment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(IconButton, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(SearchIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 17\n        }\n      })))\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/sushma/code/Urban-Food/client/src/components/SearchBar.js"],"names":["React","useState","useContext","Row","Col","axios","InputAdornment","TextField","IconButton","SearchIcon","ArrowDropDownIcon","RoomIcon","CityContext","Typeahead","SearchBar","props","selectedCity","setSelectedCity","cityDetails","setCityDetails","location","setLocation","searchKeyword","setSearchKeyword","locationSuggestions","setLocationSuggestions","searchLocationStyle","backgroundColor","width","marginBottom","border","searchBarStyle","locationOnChange","e","getLocationSuggestions","getCityId","SearchOnChange","target","value","get","headers","then","res","console","log","data","location_suggestions","length","city_id","city_name","lat","latitude","long","longitude","catch","err","locationKeyword","option","endAdornment"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\nimport { Row, Col } from 'react-bootstrap';\nimport axios from \"axios\";\nimport { InputAdornment, TextField, IconButton } from \"@material-ui/core\";\nimport SearchIcon from '@material-ui/icons/Search';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport RoomIcon from '@material-ui/icons/Room';\nimport { CityContext } from \"../utils/CityContext\";\nimport { Typeahead } from 'react-bootstrap-typeahead';\n// import Select from 'react-select';\nimport './locationCSS.css'\n\nexport default function SearchBar(props) {\n\n  const [selectedCity, setSelectedCity] = useState([]);\n  const { cityDetails, setCityDetails } = useContext(CityContext);\n\n  const [location, setLocation] = useState('');\n  const [searchKeyword, setSearchKeyword] = useState();\n  const [locationSuggestions, setLocationSuggestions] = useState([{}]);\n\n  const searchLocationStyle = { backgroundColor: \"white\", width: \"0%\", marginBottom: \"20px\", border: \"none\" };\n\n  const searchBarStyle = { backgroundColor: \"white\", width: \"40%\", marginBottom: \"30px\", border: \"none\" }\n\n  const locationOnChange = (location, e) => {\n    setLocation(location)\n    getLocationSuggestions(location)\n    getCityId(selectedCity);\n  }\n\n  const SearchOnChange = (e) => {\n    setSearchKeyword(e.target.value)\n  }\n\n  const getCityId = (location) => {\n    axios.get('https://developers.zomato.com/api/v2.1/locations?query=' + location, {\n      headers: { \"user-key\": \"7643451d5684bd9eb0116cdfd72673a9\" }\n    })\n      .then(res => {\n        console.log(\"getCityId response\", res.data)\n        if (res.data.location_suggestions.length > 0) {\n          setCityDetails(\n            {\n              city_id: res.data.location_suggestions[0].city_id,\n              city_name: res.data.location_suggestions[0].city_name,\n              lat: res.data.location_suggestions[0].latitude,\n              long: res.data.location_suggestions[0].longitude\n            })\n        }\n      })\n      .catch(err => console.log(err));\n  }\n\n  const getLocationSuggestions = (locationKeyword) => {\n    if (!locationKeyword) return 'Toronto';\n    axios.get('https://developers.zomato.com/api/v2.1/locations?count=10&query=' + locationKeyword, {\n      headers: { \"user-key\": \"7643451d5684bd9eb0116cdfd72673a9\" }\n    })\n      .then(res => {\n        console.log(\"Location suggestions response\", res.data)\n        setLocationSuggestions(res.data.location_suggestions)\n      })\n      .catch(err => console.log(err));\n  }\n\n  return (\n    <div>\n      <Typeahead\n        id=\"locationBox\"\n        clearButton\n        onChange={setSelectedCity}\n        onInputChange={locationOnChange}\n        labelKey={(option) => `${option.city_name}`}\n        options={locationSuggestions}\n        placeholder=\"Select city...\"\n        selected={selectedCity}\n        style={searchLocationStyle}\n        \n      />\n\n      <TextField\n        id=\"standard-full-width\"\n        placeholder=\"Search for a restaurant, cuisine or a dish\"\n        value={searchKeyword}\n        onChange={SearchOnChange}\n        autoComplete=\"on\"\n        variant=\"outlined\"\n        style={searchBarStyle}\n        InputProps={{\n          endAdornment: (\n            <InputAdornment>\n              <IconButton>\n                <SearchIcon />\n              </IconButton>\n            </InputAdornment>\n          )\n        }}\n      />\n\n    </div >\n  )\n}\n"]},"metadata":{},"sourceType":"module"}